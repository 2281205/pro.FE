<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Document</title>   
    <style>
    *{
        box-sizing: border-box;
    }
    .block
    {
    background-color: black;margin: 0;position: absolute;
    }
    .wrap  {background-color: bisque; margin: 3px auto;position: relative }
    .class1{background-color: red;}
    .class2{background-color: orange;}
    .class3{background-color: yellow;}
    .class4{background-color: green;}
    .class5{background-color: lime;}
    .class6{background-color: aqua;}
    .class7{background-color: blue;}
    .class8{background-color: violet;}
    .class9{background-color: purple;}
    .class10{background-color: darkred;}

    .btn   {margin-left: 40%;}
    </style>
</head>
<body>
<script>


let mainW = window.innerWidth >= window.innerHeight ? window.innerHeight-40 : window.innerWidth-30;
let baseBlock = Math.floor(mainW/20);
let count = [];
let sizeBlock = [];

console.log(`window.innerWidth: ${window.innerWidth};
window.innerHeight: ${window.innerHeight};
mainW: ${mainW}
sizeBlock: ${sizeBlock}`);

document.querySelector(`body`).innerHTML=`
    <div class='btn'>
    <button type="button" onclick="loop()"><b>START</b></button>
    <button type="button" onclick="manualSTOP()">manuall <b>STOP</b></button>
    <button type="button" onclick="manualClear()"><b>clear</b></button>
    </div>
    <div class="wrap"></div>`;

let wrapper = document.querySelector('.wrap');
    wrapper.style.width =`${mainW}px`;
    wrapper.style.height =`${mainW}px`;

let Arr = new Array(5);

manualPlus = (i) =>{
    if (!document.querySelector(`.class${i}`))
        {
        console.log(`in!!`);
            count[i] = 0;
           sizeBlock[i]=baseBlock;
            wrapper.insertAdjacentHTML(`beforeEnd`,`<div class='block class${i}'></div>`);
                //document.querySelector('.wrap').innerHTML =`<div class='block class${i}'></div>`;
           let block = document.querySelector(`.class${i}`)
            block.style.width =`${sizeBlock}px`;
            block.style.height =`${sizeBlock}px`;
           // block.style.backgroundColor = 'red';  
            block.style.zIndex = i;
        }
    sizeBlock[i] +=Math.floor(mainW/100);    
    console.log(`z-index: ${i}, count: ${count[i]}, sizeBlock= ${sizeBlock[i]}, step= ${Math.floor(mainW/100)}, 
    Width= ${window.innerWidth}, Height= ${window.innerHeight}`);
        
    let block = document.querySelector(`.class${i}`)
    block.style.width =`${sizeBlock[i]}px`; block.style.height =`${sizeBlock[i]}px`;
    
   if(count[i]==100)
        {
           // document.querySelector('.wrap').innerHTML = ``; 
           block.style.width =`0px`; block.style.height =`0px`;
           block.style.zIndex=-100;
            clearInterval(Arr[i]);}
    else count[i]++;

    };


manualMinus = () =>{

    sizeBlock<=baseBlock 
    ?   sizeBlock=mainW-10
    :   sizeBlock -=Math.floor(mainW/100);
    console.log(`count: ${count}, sizeBlock= ${sizeBlock}, step= ${Math.floor(mainW/100)}, Width= ${window.innerWidth}, Height= ${window.innerHeight}`);
    
    count<=1
    ?  count=100
    :  count--;
    let block = document.querySelector('.block');
    block.style.width =`${sizeBlock}px`;block.style.height =`${sizeBlock}px`;
        };      

// $("#cimg2").click(function(event){
//   clearInterval(idIntervals);//тут останавливаем таймер
//   idIntervals=setInterval(function(){timer();},1000);//опять запускается таймер
// }


// const blocks = document.querySelectorAll(`.block`);
// blocks.forEach((block, index) => {
//     index++;
//     setTimeout(()=>block.remove(), index*1000);
// })

//setTimeout(()=>block.classList.remove(className), 1000);

// for(ii=1; ii<4;ii++){
// Arr[ii] = setInterval(()=>{manualPlus(ii)}, ii*100);}
const loop = () => {
setTimeout( () => {Arr[1] = setInterval(()=> {manualPlus(1)}, 300)},10);
setTimeout( () => {Arr[2] = setInterval(()=> {manualPlus(2)}, 300)},3000);
setTimeout( () => {Arr[3] = setInterval(()=> {manualPlus(3)}, 300)},6000);
setTimeout( () => {Arr[4] = setInterval(()=> {manualPlus(4)}, 300)},9000);
setTimeout( () => {Arr[5] = setInterval(()=> {manualPlus(5)}, 300)},12000);
setTimeout( () => {Arr[6] = setInterval(()=> {manualPlus(6)}, 300)},15000);
setTimeout( () => {Arr[7] = setInterval(()=> {manualPlus(7)}, 300)},18000);
setTimeout( () => {Arr[8] = setInterval(()=> {manualPlus(8)}, 300)},21000);
setTimeout( () => {Arr[9] = setInterval(()=> {manualPlus(9)}, 300)},24000);
setTimeout( () => {Arr[10] = setInterval(()=> {manualPlus(10)}, 300)},27000);
}

const manualSTOP = () => Arr.forEach (item=>clearInterval(item))
const manualClear = () => wrapper.innerHTML='';

</script>
</body>
</html>